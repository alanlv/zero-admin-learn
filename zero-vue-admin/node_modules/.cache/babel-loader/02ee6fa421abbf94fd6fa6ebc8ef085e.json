{"remainingRequest":"/home/nyx/go/src/zero-admin-learn/zero-vue-admin/node_modules/babel-loader/lib/index.js!/home/nyx/go/src/zero-admin-learn/zero-vue-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/nyx/go/src/zero-admin-learn/zero-vue-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nyx/go/src/zero-admin-learn/zero-vue-admin/src/views/system/role/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nyx/go/src/zero-admin-learn/zero-vue-admin/src/views/system/role/index.vue","mtime":1663772681937},{"path":"/home/nyx/go/src/zero-admin-learn/zero-vue-admin/babel.config.js","mtime":1663772681925},{"path":"/home/nyx/go/src/zero-admin-learn/zero-vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1663772752666},{"path":"/home/nyx/go/src/zero-admin-learn/zero-vue-admin/node_modules/babel-loader/lib/index.js","mtime":1663772755418},{"path":"/home/nyx/go/src/zero-admin-learn/zero-vue-admin/node_modules/cache-loader/dist/cjs.js","mtime":1663772752666},{"path":"/home/nyx/go/src/zero-admin-learn/zero-vue-admin/node_modules/vue-loader/lib/index.js","mtime":1663772757978}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL255eC9nby9zcmMvemVyby1hZG1pbi1sZWFybi96ZXJvLXZ1ZS1hZG1pbi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zb3J0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgcXVlcnlSb2xlTGlzdCwgY3JlYXRlUm9sZSwgdXBkYXRlUm9sZSwgZGVsZXRlUm9sZSB9IGZyb20gJ0AvYXBpL3N5c3RlbS9yb2xlL3JvbGUnOwppbXBvcnQgd2F2ZXMgZnJvbSAnQC9kaXJlY3RpdmUvd2F2ZXMnOwppbXBvcnQgUGFnaW5hdGlvbiBmcm9tICdAL2NvbXBvbmVudHMvUGFnaW5hdGlvbic7CmltcG9ydCB7IGZldGNoTGlzdCBhcyB0cmVlTGlzdCwgdXBkYXRlUm9sZU1lbnUgfSBmcm9tICdAL2FwaS9zeXN0ZW0vcm9sZS9yb2xlcmVzb3VyY2VzJzsKaW1wb3J0IHsgdHJlZSB9IGZyb20gIkAvdXRpbHMvdXRpbHMiOwp2YXIgY2FsZW5kYXJUeXBlT3B0aW9ucyA9IFt7CiAga2V5OiAnQ04nLAogIGRpc3BsYXlfbmFtZTogJ0NoaW5hJwp9LCB7CiAga2V5OiAnVVMnLAogIGRpc3BsYXlfbmFtZTogJ1VTQScKfSwgewogIGtleTogJ0pQJywKICBkaXNwbGF5X25hbWU6ICdKYXBhbicKfSwgewogIGtleTogJ0VVJywKICBkaXNwbGF5X25hbWU6ICdFdXJvem9uZScKfV07IC8vIGFyciB0byBvYmosIHN1Y2ggYXMgeyBDTiA6ICJDaGluYSIsIFVTIDogIlVTQSIgfQoKdmFyIGNhbGVuZGFyVHlwZUtleVZhbHVlID0gY2FsZW5kYXJUeXBlT3B0aW9ucy5yZWR1Y2UoZnVuY3Rpb24gKGFjYywgY3VyKSB7CiAgYWNjW2N1ci5rZXldID0gY3VyLmRpc3BsYXlfbmFtZTsKICByZXR1cm4gYWNjOwp9LCB7fSk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ29tcGxleFRhYmxlJywKICBjb21wb25lbnRzOiB7CiAgICBQYWdpbmF0aW9uOiBQYWdpbmF0aW9uCiAgfSwKICBkaXJlY3RpdmVzOiB7CiAgICB3YXZlczogd2F2ZXMKICB9LAogIGZpbHRlcnM6IHsKICAgIHN0YXR1c0ZpbHRlcjogZnVuY3Rpb24gc3RhdHVzRmlsdGVyKHN0YXR1cykgewogICAgICB2YXIgc3RhdHVzTWFwID0gewogICAgICAgIHB1Ymxpc2hlZDogJ3N1Y2Nlc3MnLAogICAgICAgIGRyYWZ0OiAnaW5mbycsCiAgICAgICAgZGVsZXRlZDogJ2RhbmdlcicKICAgICAgfTsKICAgICAgcmV0dXJuIHN0YXR1c01hcFtzdGF0dXNdOwogICAgfSwKICAgIHR5cGVGaWx0ZXI6IGZ1bmN0aW9uIHR5cGVGaWx0ZXIodHlwZSkgewogICAgICByZXR1cm4gY2FsZW5kYXJUeXBlS2V5VmFsdWVbdHlwZV07CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFibGVLZXk6IDAsCiAgICAgIGxpc3Q6IG51bGwsCiAgICAgIHRvdGFsOiAwLAogICAgICBsaXN0TG9hZGluZzogdHJ1ZSwKICAgICAgbGlzdFF1ZXJ5OiB7CiAgICAgICAgY3VycmVudDogMSwKICAgICAgICBwYWdlU2l6ZTogMTAsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgY3JlYXRlQnk6ICcnLAogICAgICAgIGltcG9ydGFuY2U6IHVuZGVmaW5lZCwKICAgICAgICB0aXRsZTogdW5kZWZpbmVkLAogICAgICAgIHR5cGU6IHVuZGVmaW5lZCwKICAgICAgICBzdGF0dXM6ICcnCiAgICAgIH0sCiAgICAgIGltcG9ydGFuY2VPcHRpb25zOiBbMSwgMiwgM10sCiAgICAgIHNvcnRPcHRpb25zOiBbewogICAgICAgIGxhYmVsOiAnSUQgQXNjZW5kaW5nJywKICAgICAgICBrZXk6ICcraWQnCiAgICAgIH0sIHsKICAgICAgICBsYWJlbDogJ0lEIERlc2NlbmRpbmcnLAogICAgICAgIGtleTogJy1pZCcKICAgICAgfV0sCiAgICAgIHN0YXR1c09wdGlvbnM6IFsncHVibGlzaGVkJywgJ2RyYWZ0JywgJ2RlbGV0ZWQnXSwKICAgICAgc2hvd1Jldmlld2VyOiBmYWxzZSwKICAgICAgdGVtcDogewogICAgICAgIGlkOiB1bmRlZmluZWQsCiAgICAgICAgaW1wb3J0YW5jZTogMSwKICAgICAgICByZW1hcms6ICcnLAogICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSwKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgdHlwZTogJycsCiAgICAgICAgc3RhdHVzOiAnMScKICAgICAgfSwKICAgICAgZGlhbG9nRm9ybVZpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dSZXNvdXJjZVZpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dTdGF0dXM6ICcnLAogICAgICB0ZXh0TWFwOiB7CiAgICAgICAgdXBkYXRlOiAnRWRpdCcsCiAgICAgICAgY3JlYXRlOiAnQ3JlYXRlJwogICAgICB9LAogICAgICBkaWFsb2dQdlZpc2libGU6IGZhbHNlLAogICAgICBwdkRhdGE6IFtdLAogICAgICBydWxlczogewogICAgICAgIHR5cGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICd0eXBlIGlzIHJlcXVpcmVkJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgdGltZXN0YW1wOiBbewogICAgICAgICAgdHlwZTogJ2RhdGUnLAogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAndGltZXN0YW1wIGlzIHJlcXVpcmVkJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0sCiAgICAgICAgdGl0bGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICd0aXRsZSBpcyByZXF1aXJlZCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICB0cmVlRGF0YUxpc3Q6IFtdLAogICAgICBkZWZhdWx0UHJvcHM6IHsKICAgICAgICBjaGlsZHJlbjogJ2NoaWxkcmVuJywKICAgICAgICBsYWJlbDogJ2xhYmVsJwogICAgICB9LAogICAgICBkb3dubG9hZExvYWRpbmc6IGZhbHNlLAogICAgICB0cmVlTGlzdFF1ZXJ5OiB7CiAgICAgICAgY3VycmVudDogMSwKICAgICAgICBwYWdlU2l6ZTogMTAwMDAKICAgICAgfSwKICAgICAgcm9sZVJlc291cmNlOiB7CiAgICAgICAgcm9sZV9pZDogJycsCiAgICAgICAgbWVudV9pZHM6ICcnCiAgICAgIH0sCiAgICAgIGRlZmF1bHRDaGVja2VkS2V5czogW10KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRMaXN0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRMaXN0OiBmdW5jdGlvbiBnZXRMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5saXN0TG9hZGluZyA9IHRydWU7CiAgICAgIHF1ZXJ5Um9sZUxpc3QodGhpcy5saXN0UXVlcnkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMubGlzdCA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgX3RoaXMudG90YWwgPSByZXNwb25zZS50b3RhbDsKICAgICAgICBfdGhpcy5saXN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVGaWx0ZXI6IGZ1bmN0aW9uIGhhbmRsZUZpbHRlcigpIHsKICAgICAgdGhpcy5saXN0UXVlcnkuY3VycmVudCA9IDE7CiAgICAgIHRoaXMuZ2V0TGlzdCgpOwogICAgfSwKICAgIGhhbmRsZU1vZGlmeVN0YXR1czogZnVuY3Rpb24gaGFuZGxlTW9kaWZ5U3RhdHVzKHJvdywgc3RhdHVzKSB7CiAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIG1lc3NhZ2U6ICfmk43kvZzmiJDlip8nLAogICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICB9KTsKICAgICAgcm93LnN0YXR1cyA9IHN0YXR1czsKICAgIH0sCiAgICBzb3J0Q2hhbmdlOiBmdW5jdGlvbiBzb3J0Q2hhbmdlKGRhdGEpIHsKICAgICAgdmFyIHByb3AgPSBkYXRhLnByb3AsCiAgICAgICAgICBvcmRlciA9IGRhdGEub3JkZXI7CgogICAgICBpZiAocHJvcCA9PT0gJ2lkJykgewogICAgICAgIHRoaXMuc29ydEJ5SUQob3JkZXIpOwogICAgICB9CiAgICB9LAogICAgc29ydEJ5SUQ6IGZ1bmN0aW9uIHNvcnRCeUlEKG9yZGVyKSB7CiAgICAgIGlmIChvcmRlciA9PT0gJ2FzY2VuZGluZycpIHsKICAgICAgICB0aGlzLmxpc3RRdWVyeS5zb3J0ID0gJytpZCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5saXN0UXVlcnkuc29ydCA9ICctaWQnOwogICAgICB9CgogICAgICB0aGlzLmhhbmRsZUZpbHRlcigpOwogICAgfSwKICAgIHJlc2V0VGVtcDogZnVuY3Rpb24gcmVzZXRUZW1wKCkgewogICAgICB0aGlzLnRlbXAgPSB7CiAgICAgICAgaWQ6IHVuZGVmaW5lZCwKICAgICAgICBuYW1lOiAnJywKICAgICAgICBhZ2U6ICcnLAogICAgICAgIHBob25lOiAnJywKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgY3JlYXRlVGltZTogbmV3IERhdGUoKSwKICAgICAgICByZW1hcmtzOiAnJwogICAgICB9OwogICAgfSwKICAgIGhhbmRsZUNyZWF0ZTogZnVuY3Rpb24gaGFuZGxlQ3JlYXRlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMucmVzZXRUZW1wKCk7CiAgICAgIHRoaXMuZGlhbG9nU3RhdHVzID0gJ2NyZWF0ZSc7CiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLnRlbXAuc3RhdHVzID0gJzEnOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRyZWZzWydkYXRhRm9ybSddLmNsZWFyVmFsaWRhdGUoKTsKICAgICAgfSk7CiAgICB9LAogICAgY3JlYXRlRGF0YTogZnVuY3Rpb24gY3JlYXRlRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgX3RoaXMzLnRlbXAuc3RhdHVzID0gTnVtYmVyKF90aGlzMy50ZW1wLnN0YXR1cyk7CiAgICAgICAgICBjcmVhdGVSb2xlKF90aGlzMy50ZW1wKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy8gdGhpcy5saXN0LnVuc2hpZnQodGhpcy50ZW1wKQogICAgICAgICAgICBfdGhpczMuZ2V0TGlzdCgpOwoKICAgICAgICAgICAgX3RoaXMzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczMuJG5vdGlmeSh7CiAgICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliJvlu7rmiJDlip8nLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlVXBkYXRlOiBmdW5jdGlvbiBoYW5kbGVVcGRhdGUocm93KSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy50ZW1wID0gT2JqZWN0LmFzc2lnbih7fSwgcm93KTsKICAgICAgdGhpcy50ZW1wLnN0YXR1cyA9IHJvdy5zdGF0dXMgKyAnJzsKICAgICAgdGhpcy5kaWFsb2dTdGF0dXMgPSAndXBkYXRlJzsKICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQuJHJlZnNbJ2RhdGFGb3JtJ10uY2xlYXJWYWxpZGF0ZSgpOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVEYXRhOiBmdW5jdGlvbiB1cGRhdGVEYXRhKCkgewogICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbJ2RhdGFGb3JtJ10udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB2YXIgdGVtcERhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBfdGhpczUudGVtcCk7CiAgICAgICAgICB0ZW1wRGF0YS5zdGF0dXMgPSBOdW1iZXIoX3RoaXM1LnRlbXAuc3RhdHVzKTsKICAgICAgICAgIHVwZGF0ZVJvbGUodGVtcERhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoX3RoaXM1Lmxpc3QpLAogICAgICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICB2YXIgdiA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICAgIGlmICh2LmlkID09PSBfdGhpczUudGVtcC5pZCkgewogICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSBfdGhpczUubGlzdC5pbmRleE9mKHYpOwoKICAgICAgICAgICAgICAgICAgX3RoaXM1Lmxpc3Quc3BsaWNlKGluZGV4LCAxLCBfdGhpczUudGVtcCk7CgogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXM1LmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczUuJG5vdGlmeSh7CiAgICAgICAgICAgICAgdGl0bGU6ICfmiJDlip8nLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfmm7TmlrDmiJDlip8nLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUocm93KSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy4kY29uZmlybSgn5q2k5pON5L2c5bCG5rC45LmF5Yig6Zmk6K+l5p2h5pWw5o2uLCDmmK/lkKbnu6fnu60/JywgJ+aPkOekuicsIHsKICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgdHlwZTogJ2Vycm9yJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBkZWxldGVSb2xlKHsKICAgICAgICAgIGlkOiByb3cuaWQKICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXM2LmdldExpc3QoKTsKCiAgICAgICAgICBfdGhpczYuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczYuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUmVzb3VyY2VVcGRhdGU6IGZ1bmN0aW9uIGhhbmRsZVJlc291cmNlVXBkYXRlKHJvdykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHRyZWVMaXN0KHJvdy5pZCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpczcudHJlZURhdGFMaXN0ID0gdHJlZShyZXNwb25zZS5hbGxEYXRhLCAwLCAncGFyZW50SWQnKTsKICAgICAgICBjb25zb2xlLmxvZyhfdGhpczcudHJlZURhdGFMaXN0LCAndHJlZScpOwogICAgICAgIF90aGlzNy5kZWZhdWx0Q2hlY2tlZEtleXMgPSByZXNwb25zZS51c2VyRGF0YTsKICAgICAgICBjb25zb2xlLmxvZyhfdGhpczcuZGVmYXVsdENoZWNrZWRLZXlzLCAndHJlZScpOwogICAgICB9KTsKICAgICAgdGhpcy5kaWFsb2dTdGF0dXMgPSAndXBkYXRlJzsKICAgICAgdGhpcy5kaWFsb2dSZXNvdXJjZVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLnJvbGVSZXNvdXJjZS5yb2xlX2lkID0gcm93LmlkOwogICAgfSwKICAgIHVwZGF0ZVJlc291cmNlRGF0YTogZnVuY3Rpb24gdXBkYXRlUmVzb3VyY2VEYXRhKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHJlZnMudHJlZS5nZXRDaGVja2VkS2V5cygpKTsKICAgICAgdGhpcy5yb2xlUmVzb3VyY2UubWVudV9pZHMgPSB0aGlzLiRyZWZzLnRyZWUuZ2V0Q2hlY2tlZEtleXMoKTsKICAgICAgY29uc29sZS5sb2codGhpcy5yb2xlUmVzb3VyY2UpOwogICAgICB1cGRhdGVSb2xlTWVudSh0aGlzLnJvbGVSZXNvdXJjZSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM4LmRpYWxvZ1Jlc291cmNlVmlzaWJsZSA9IGZhbHNlOwoKICAgICAgICBfdGhpczguJG5vdGlmeSh7CiAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsCiAgICAgICAgICBtZXNzYWdlOiAn5pu05paw5oiQ5YqfJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":"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","names":["key","display_name","acc","name","components","Pagination","directives","waves","filters","statusFilter","status","published","draft","deleted","typeFilter","type","data","tableKey","list","total","listLoading","listQuery","current","pageSize","createBy","importance","title","importanceOptions","sortOptions","label","statusOptions","showReviewer","temp","id","remark","timestamp","dialogFormVisible","dialogResourceVisible","dialogStatus","textMap","update","create","dialogPvVisible","pvData","rules","required","message","trigger","treeDataList","defaultProps","children","downloadLoading","treeListQuery","roleResource","role_id","menu_ids","defaultCheckedKeys","created","methods","getList","queryRoleList","handleFilter","handleModifyStatus","row","sortChange","sortByID","order","resetTemp","age","phone","email","createTime","remarks","handleCreate","createData","createRole","handleUpdate","updateData","tempData","updateRole","handleDelete","confirmButtonText","cancelButtonText","then","deleteRole","catch","handleResourceUpdate","treeList","console","updateResourceData","updateRoleMenu"],"sourceRoot":"src/views/system/role","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div class=\"filter-container\">\n      <el-input v-model=\"listQuery.name\" placeholder=\"角色名\" style=\"width: 200px;\" class=\"filter-item\" @keyup.enter.native=\"handleFilter\" />\n      <el-input v-model=\"listQuery.status\" placeholder=\"状态\" style=\"width: 200px;\" class=\"filter-item\" @keyup.enter.native=\"handleFilter\" />\n      <el-input v-model=\"listQuery.createBy\" placeholder=\"创建者\" style=\"width: 200px;\" class=\"filter-item\" @keyup.enter.native=\"handleFilter\" />\n<!--      <el-select v-model=\"listQuery.importance\" :placeholder=\"重要性\" clearable style=\"width: 90px\" class=\"filter-item\">-->\n<!--        <el-option v-for=\"item in importanceOptions\" :key=\"item\" :label=\"item\" :value=\"item\" />-->\n<!--      </el-select>-->\n<!--      <el-select v-model=\"listQuery.type\" :placeholder=\"类型\" clearable class=\"filter-item\" style=\"width: 130px\">-->\n<!--        <el-option v-for=\"item in calendarTypeOptions\" :key=\"item.key\" :label=\"item.display_name+'('+item.key+')'\" :value=\"item.key\" />-->\n<!--      </el-select>-->\n<!--      <el-select v-model=\"listQuery.sort\" style=\"width: 140px\" class=\"filter-item\" @change=\"handleFilter\">-->\n<!--        <el-option v-for=\"item in sortOptions\" :key=\"item.key\" :label=\"item.label\" :value=\"item.key\" />-->\n<!--      </el-select>-->\n      <el-button v-waves class=\"filter-item\" type=\"primary\" icon=\"el-icon-search\" @click=\"handleFilter\">\n        查询\n      </el-button>\n      <el-button v-waves class=\"filter-item\" style=\"margin-left: 10px;\" type=\"primary\" icon=\"el-icon-edit\" @click=\"handleCreate\">\n        添加\n      </el-button>\n<!--      <el-button v-waves :loading=\"downloadLoading\" class=\"filter-item\" type=\"primary\" icon=\"el-icon-download\" @click=\"handleDownload\">-->\n<!--        {{ $t('table.export') }}-->\n<!--      </el-button>-->\n<!--      <el-checkbox v-model=\"showReviewer\" class=\"filter-item\" style=\"margin-left:15px;\" @change=\"tableKey=tableKey+1\">-->\n<!--        显示-->\n<!--      </el-checkbox>-->\n    </div>\n\n    <el-table\n      v-loading=\"listLoading\"\n      :data=\"list\"\n      element-loading-text=\"Loading\"\n      fit\n      highlight-current-row\n    >\n      <el-table-column align=\"center\" label=\"ID\" width=\"95\">\n        <template slot-scope=\"scope\">\n<!--          {{ scope.$index }}-->\n          {{ scope.row.id }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"角色名\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.name }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"状态\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.status }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" prop=\"created_at\" label=\"备注\" >\n        <template slot-scope=\"scope\">\n          <span>{{ scope.row.remark }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"创建人\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.createBy }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"创建时间\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.createTime }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"更新人\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.lastUpdateBy }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"更新时间\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.lastUpdateTime }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\" width=\"300\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"{row}\">\n          <el-button v-waves type=\"primary\" size=\"mini\" @click=\"handleUpdate(row)\">\n            编辑\n          </el-button>\n          <el-button v-waves type=\"primary\" size=\"mini\" @click=\"handleResourceUpdate(row)\">\n            分权限\n          </el-button>\n          <el-button v-waves size=\"mini\" type=\"danger\" @click=\"handleDelete(row)\">\n            删除\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <pagination v-show=\"total>0\" :total=\"total\" :page.sync=\"listQuery.current\" :limit.sync=\"listQuery.pageSize\" @pagination=\"getList\" />\n\n    <el-dialog :title=\"textMap[dialogStatus]\" :visible.sync=\"dialogFormVisible\">\n      <el-form ref=\"dataForm\" :rules=\"rules\" :model=\"temp\" label-position=\"left\" label-width=\"70px\" style=\"width: 400px; margin-left:50px;\">\n        <el-form-item label=\"角色名\" prop=\"name\">\n            <el-input v-model=\"temp.name\" />\n        </el-form-item>\n        <el-form-item label=\"状态\" prop=\"status\">\n          <el-radio v-model=\"temp.status\" label=\"1\">正常</el-radio>\n          <el-radio v-model=\"temp.status\" label=\"0\">禁用</el-radio>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input v-model=\"temp.remark\" :autosize=\"{ minRows: 2, maxRows: 4}\" type=\"textarea\" placeholder=\"Please input\" />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">\n          取消\n        </el-button>\n        <el-button type=\"primary\" v-waves @click=\"dialogStatus==='create'?createData():updateData()\">\n          确认\n        </el-button>\n      </div>\n    </el-dialog>\n\n    <el-dialog :visible.sync=\"dialogResourceVisible\" title=\"分配权限\">\n      <el-tree\n        :data=\"treeDataList\"\n        show-checkbox\n        node-key=\"id\"\n        ref=\"tree\"\n        default-expand-all\n        highlight-current\n        check-on-click-node\n        :default-checked-keys=\"defaultCheckedKeys\"\n        :props=\"defaultProps\">\n      </el-tree>\n      <span slot=\"footer\" class=\"dialog-footer\">\n         <el-button @click=\"dialogResourceVisible = false\">\n          取消\n        </el-button>\n        <el-button v-waves type=\"primary\" @click=\"updateResourceData\">确认分配权限</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\n  import { queryRoleList, createRole, updateRole,deleteRole } from '@/api/system/role/role'\n  import waves from '@/directive/waves'\n  import Pagination from '@/components/Pagination'\n  import { fetchList as treeList,updateRoleMenu } from '@/api/system/role/roleresources'\n  import {tree} from \"@/utils/utils\";\n\n  const calendarTypeOptions = [\n    { key: 'CN', display_name: 'China' },\n    { key: 'US', display_name: 'USA' },\n    { key: 'JP', display_name: 'Japan' },\n    { key: 'EU', display_name: 'Eurozone' }\n  ]\n\n  // arr to obj, such as { CN : \"China\", US : \"USA\" }\n  const calendarTypeKeyValue = calendarTypeOptions.reduce((acc, cur) => {\n    acc[cur.key] = cur.display_name\n    return acc\n  }, {})\n\n  export default {\n    name: 'ComplexTable',\n    components: { Pagination },\n    directives: { waves },\n    filters: {\n      statusFilter(status) {\n        const statusMap = {\n          published: 'success',\n          draft: 'info',\n          deleted: 'danger'\n        }\n        return statusMap[status]\n      },\n      typeFilter(type) {\n        return calendarTypeKeyValue[type]\n      },\n    },\n    data() {\n      return {\n        tableKey: 0,\n        list: null,\n        total: 0,\n        listLoading: true,\n        listQuery: {\n          current: 1,\n          pageSize: 10,\n          name: '',\n          createBy: '',\n          importance: undefined,\n          title: undefined,\n          type: undefined,\n          status: ''\n        },\n        importanceOptions: [1, 2, 3],\n        sortOptions: [{ label: 'ID Ascending', key: '+id' }, { label: 'ID Descending', key: '-id' }],\n        statusOptions: ['published', 'draft', 'deleted'],\n        showReviewer: false,\n        temp: {\n          id: undefined,\n          importance: 1,\n          remark: '',\n          timestamp: new Date(),\n          title: '',\n          type: '',\n          status: '1'\n        },\n        dialogFormVisible: false,\n        dialogResourceVisible: false,\n        dialogStatus: '',\n        textMap: {\n          update: 'Edit',\n          create: 'Create'\n        },\n        dialogPvVisible: false,\n        pvData: [],\n        rules: {\n          type: [{ required: true, message: 'type is required', trigger: 'change' }],\n          timestamp: [{ type: 'date', required: true, message: 'timestamp is required', trigger: 'change' }],\n          title: [{ required: true, message: 'title is required', trigger: 'blur' }]\n        },\n        treeDataList: [],\n        defaultProps: {\n          children: 'children',\n          label: 'label'\n        },\n        downloadLoading: false,\n        treeListQuery: {\n          current: 1,\n          pageSize: 10000\n        },\n        roleResource: {\n          role_id: '',\n          menu_ids: ''\n        },\n        defaultCheckedKeys: []\n      }\n    },\n    created() {\n      this.getList()\n    },\n    methods: {\n      getList() {\n        this.listLoading = true\n        queryRoleList(this.listQuery).then(response => {\n          this.list = response.data\n          this.total = response.total\n          this.listLoading = false\n        })\n      },\n      handleFilter() {\n        this.listQuery.current = 1\n        this.getList()\n      },\n      handleModifyStatus(row, status) {\n        this.$message({\n          message: '操作成功',\n          type: 'success'\n        })\n        row.status = status\n      },\n      sortChange(data) {\n        const { prop, order } = data\n        if (prop === 'id') {\n          this.sortByID(order)\n        }\n      },\n      sortByID(order) {\n        if (order === 'ascending') {\n          this.listQuery.sort = '+id'\n        } else {\n          this.listQuery.sort = '-id'\n        }\n        this.handleFilter()\n      },\n      resetTemp() {\n        this.temp = {\n          id: undefined,\n          name: '',\n          age: '',\n          phone: '',\n          email: '',\n          createTime: new Date(),\n          remarks: '',\n        }\n      },\n      handleCreate() {\n        this.resetTemp()\n        this.dialogStatus = 'create'\n        this.dialogFormVisible = true\n        this.temp.status = '1'\n        this.$nextTick(() => {\n          this.$refs['dataForm'].clearValidate()\n        })\n      },\n      createData() {\n        this.$refs['dataForm'].validate((valid) => {\n          if (valid) {\n            this.temp.status = Number(this.temp.status)\n            createRole(this.temp).then(() => {\n              // this.list.unshift(this.temp)\n              this.getList()\n              this.dialogFormVisible = false\n              this.$notify({\n                title: '成功',\n                message: '创建成功',\n                type: 'success',\n              })\n            })\n          }\n        })\n      },\n      handleUpdate(row) {\n        this.temp = Object.assign({}, row)\n        this.temp.status = row.status+''\n        this.dialogStatus = 'update'\n        this.dialogFormVisible = true\n        this.$nextTick(() => {\n          this.$refs['dataForm'].clearValidate()\n        })\n      },\n      updateData() {\n        this.$refs['dataForm'].validate((valid) => {\n          if (valid) {\n            const tempData = Object.assign({}, this.temp)\n            tempData.status = Number(this.temp.status)\n            updateRole(tempData).then(() => {\n              for (const v of this.list) {\n                if (v.id === this.temp.id) {\n                  const index = this.list.indexOf(v)\n                  this.list.splice(index, 1, this.temp)\n                  break\n                }\n              }\n              this.dialogFormVisible = false\n              this.$notify({\n                title: '成功',\n                message: '更新成功',\n                type: 'success',\n              })\n            })\n          }\n        })\n      },\n      handleDelete(row) {\n        this.$confirm('此操作将永久删除该条数据, 是否继续?', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'error'\n        }).then(() => {\n          deleteRole({id:row.id}).then(response => {\n            this.getList()\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n          })\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });\n        });\n      },\n\n      handleResourceUpdate(row) {\n        treeList(row.id).then(response => {\n          this.treeDataList = tree(response.allData,0,'parentId')\n          console.log(this.treeDataList,'tree')\n          this.defaultCheckedKeys = response.userData\n          console.log(this.defaultCheckedKeys,'tree')\n        })\n\n        this.dialogStatus = 'update'\n        this.dialogResourceVisible = true\n        this.roleResource.role_id=row.id\n      },\n      updateResourceData() {\n        console.log(this.$refs.tree.getCheckedKeys())\n        this.roleResource.menu_ids=this.$refs.tree.getCheckedKeys()\n\n        console.log(this.roleResource)\n        updateRoleMenu(this.roleResource).then(() => {\n              this.dialogResourceVisible = false\n              this.$notify({\n                title: '成功',\n                message: '更新成功',\n                type: 'success',\n              })\n            })\n          }\n    }\n  }\n</script>\n"]}]}